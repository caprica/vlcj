<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_01) on Thu Dec 01 19:50:29 GMT 2011 -->
<title>NativeLibraryManager (vlcj 1.2.2 Documentation)</title>
<meta name="date" content="2011-12-01">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="NativeLibraryManager (vlcj 1.2.2 Documentation)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../../../uk/co/caprica/vlcj/runtime/install/NativeLibraryManagerEventAdapter.html" title="class in uk.co.caprica.vlcj.runtime.install"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?uk/co/caprica/vlcj/runtime/install/NativeLibraryManager.html" target="_top">Frames</a></li>
<li><a href="NativeLibraryManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">uk.co.caprica.vlcj.runtime.install</div>
<h2 title="Class NativeLibraryManager" class="title">Class NativeLibraryManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>uk.co.caprica.vlcj.runtime.install.NativeLibraryManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">NativeLibraryManager</span>
extends java.lang.Object</pre>
<div class="block">Implementation of a native library manager.
 <p>
 This class provides assistance where it is often desirable to include native
 library resources in a jar file that is provided with the application, 
 enabling the application to execute properly without requiring that the 
 native library resources be installed beforehand.
 <p>
 The idea is to package the native library files (in the case of vlc this is
 the libvlc native library and all of the required plug-in native libraries)
 into a single jar file, ship that jar file along with the application, and
 have the application unpack those jars at run-time (or perhaps installation-
 time).
 <p>
 This will not happen automatically, it is up to each individual client
 application to determine how this class will be used - for example some
 clients may wish to use this class to unpack and install the native libraries
 one time only when they install their application, other applications may
 like to unpack the native libraries each time the application is executed.
 <p>
 It is often also often desirable to support multiple platforms and this can
 be achieved in two ways: either include all native libraries for all
 platforms in a single jar file, or use a number of platform-specific jar
 files. So long as the jar file is packaged as expected by this class it does
 not matter which approach you take.
 <p>
 Whatever approach is taken, this class implements the heavy-lifting that is
 required.
 <p>
 The expected structure of the native library package jar files is described
 below (where {os.name} and {os.arch} are replaced by system properties):
 <pre>
   vlc/{os.name}-{os.arch}/vlc
   vlc/{os.name}-{os.arch}/vlc/plugins
 </pre>
 For example:
 <pre>
   vlc/linux-amd64/vlc
   vlc/linux-amd64/vlc/plugins
 </pre>
 Underneath "plugins" is the regular vlc plug-ins directory structure with
 multiple nested directories.
 <p>
 Note that these system properties are converted to lower case, so "Linux"
 becomes "linux". 
 <p>
 When unpacked, the structure underneath the "install to" directory will be
 (in part):
 <pre>
   /libvlc.so
   /libvlccore.so
   /vlc/
   /vlc/plugins/
 </pre>
 The prefix <code>vlc/{os.name}-{os.arch}</code> in the package file is 
 stripped from each file name before installing locally.
 <p>
 Also as stated above, underneath "plugins" will be the regular vlc plug-in
 directory structure.
 <p>
 The native library search path should therefore be set to the "install to"
 directory of this native library manager. This is the responsibility of the
 <em>client</em> application, just because this native library manager
 unpacks the native libraries does not ensure that they will be picked up and
 used at run-time.
 <p>
 On Linux at least, this is still not yet quite enough - the "install to"
 directory must be made known by one of the usual mechanisms for setting
 operating system shared library paths, this includes either:
 <ul>
   <li>Setting the LD_LIBRARY_PATH environment variable to the "install to"
       directory;</li>
   <li>Adding the "install to" directory to the "/etc/ld.so.conf" file;</li>
   <li>Adding a new file to "/etc/ld.so.conf.d" that specifies the "install 
       to" directory;</li>
   <li>Install the libraries to an already well-known directory such as
       "/usr/lib".</li> 
 </ul>
 Of these options, only the first one would not require root privileges.
 <p>
 As before, setting the operating system shared library path in this way 
 would be the responsibility of the <em>client</em> application.
 <p>
 It is possible to register an event listener to receive progress updates -
 this could be useful to display during a splash-screen or a dialog box
 when starting the application.
 <p>
 The native library package jars must of course be added to the run-time
 class-path for the client application.
 <p>
 Implementation notes:
 <p>
 It may be <em>much</em> faster to purge the installation directory each time
 (rather than overwriting) before unpacking new resources.
 <p>
 Be very careful with <a href="../../../../../../uk/co/caprica/vlcj/runtime/install/NativeLibraryManager.html#purge()"><code>purge()</code></a> since it will delete recursively the
 <em>entire</em> contents of the native library installation directory no 
 matter what it may contain.
 <p>
 Users of this class should expect that <code>RuntimeException</code> will be 
 thrown if an error occurs.
 <p>
 Here is a <em>partial</em> example showing the structure required for a 
 native library package jar file:
 <pre>
   vlc/
   vlc/linux-amd64/
   vlc/linux-amd64/libvlc.so
   vlc/linux-amd64/libvlc.so.5
   vlc/linux-amd64/libvlc.so.5.1.0
   vlc/linux-amd64/libvlccore.so.5
   vlc/linux-amd64/libvlccore.so
   vlc/linux-amd64/libvlccore.so.5.0.0
   vlc/linux-amd64/vlc/
   vlc/linux-amd64/vlc/lua/
   vlc/linux-amd64/vlc/lua/meta/
   vlc/linux-amd64/vlc/lua/meta/fetcher/
   vlc/linux-amd64/vlc/lua/meta/fetcher/tvrage.luac
   vlc/linux-amd64/vlc/lua/meta/reader/
   vlc/linux-amd64/vlc/lua/meta/reader/filename.luac
   vlc/linux-amd64/vlc/plugins/
   vlc/linux-amd64/vlc/plugins/access/
   vlc/linux-amd64/vlc/plugins/access/libaccess_imem_plugin.so
   vlc/linux-amd64/vlc/plugins/access/libaccess_rar_plugin.so
   ...
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../uk/co/caprica/vlcj/runtime/install/NativeLibraryManager.html#NativeLibraryManager(java.lang.String)">NativeLibraryManager</a></strong>(java.lang.String&nbsp;installTo)</code>
<div class="block">Create a new native library manager.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../../uk/co/caprica/vlcj/runtime/install/NativeLibraryManager.html#NativeLibraryManager(java.lang.String, int)">NativeLibraryManager</a></strong>(java.lang.String&nbsp;installTo,
                    int&nbsp;ioBufferSize)</code>
<div class="block">Create a new native library manager.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../uk/co/caprica/vlcj/runtime/install/NativeLibraryManager.html#addEventListener(uk.co.caprica.vlcj.runtime.install.NativeLibraryManagerEventListener)">addEventListener</a></strong>(<a href="../../../../../../uk/co/caprica/vlcj/runtime/install/NativeLibraryManagerEventListener.html" title="interface in uk.co.caprica.vlcj.runtime.install">NativeLibraryManagerEventListener</a>&nbsp;listener)</code>
<div class="block">Add a listener to be notified of native library manager events.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../../uk/co/caprica/vlcj/runtime/install/NativeLibraryManager.html#getInstallTo()">getInstallTo</a></strong>()</code>
<div class="block">Get the name of the installation directory.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../uk/co/caprica/vlcj/runtime/install/NativeLibraryManager.html#purge()">purge</a></strong>()</code>
<div class="block">Purge the native library installation directory.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../uk/co/caprica/vlcj/runtime/install/NativeLibraryManager.html#removeEventListener(uk.co.caprica.vlcj.runtime.install.NativeLibraryManagerEventListener)">removeEventListener</a></strong>(<a href="../../../../../../uk/co/caprica/vlcj/runtime/install/NativeLibraryManagerEventListener.html" title="interface in uk.co.caprica.vlcj.runtime.install">NativeLibraryManagerEventListener</a>&nbsp;listener)</code>
<div class="block">Remove a listener being notified of native library manager events.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../uk/co/caprica/vlcj/runtime/install/NativeLibraryManager.html#unpackNativePackage()">unpackNativePackage</a></strong>()</code>
<div class="block">Unpack a package containing native libraries.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="NativeLibraryManager(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NativeLibraryManager</h4>
<pre>public&nbsp;NativeLibraryManager(java.lang.String&nbsp;installTo)</pre>
<div class="block">Create a new native library manager.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>installTo</code> - name of the directory to install the files to</dd></dl>
</li>
</ul>
<a name="NativeLibraryManager(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NativeLibraryManager</h4>
<pre>public&nbsp;NativeLibraryManager(java.lang.String&nbsp;installTo,
                    int&nbsp;ioBufferSize)</pre>
<div class="block">Create a new native library manager.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>installTo</code> - name of the directory to install the files to</dd><dd><code>ioBufferSize</code> - size of the file input/output buffer</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="addEventListener(uk.co.caprica.vlcj.runtime.install.NativeLibraryManagerEventListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addEventListener</h4>
<pre>public&nbsp;void&nbsp;addEventListener(<a href="../../../../../../uk/co/caprica/vlcj/runtime/install/NativeLibraryManagerEventListener.html" title="interface in uk.co.caprica.vlcj.runtime.install">NativeLibraryManagerEventListener</a>&nbsp;listener)</pre>
<div class="block">Add a listener to be notified of native library manager events.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>listener</code> - listener to add</dd></dl>
</li>
</ul>
<a name="removeEventListener(uk.co.caprica.vlcj.runtime.install.NativeLibraryManagerEventListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeEventListener</h4>
<pre>public&nbsp;void&nbsp;removeEventListener(<a href="../../../../../../uk/co/caprica/vlcj/runtime/install/NativeLibraryManagerEventListener.html" title="interface in uk.co.caprica.vlcj.runtime.install">NativeLibraryManagerEventListener</a>&nbsp;listener)</pre>
<div class="block">Remove a listener being notified of native library manager events.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>listener</code> - listener to remove</dd></dl>
</li>
</ul>
<a name="getInstallTo()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInstallTo</h4>
<pre>public&nbsp;java.lang.String&nbsp;getInstallTo()</pre>
<div class="block">Get the name of the installation directory.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>installation directory name</dd></dl>
</li>
</ul>
<a name="unpackNativePackage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unpackNativePackage</h4>
<pre>public&nbsp;void&nbsp;unpackNativePackage()</pre>
<div class="block">Unpack a package containing native libraries.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.RuntimeException</code> - if an error occurs, such as no native resource package found</dd></dl>
</li>
</ul>
<a name="purge()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>purge</h4>
<pre>public&nbsp;boolean&nbsp;purge()</pre>
<div class="block">Purge the native library installation directory.
 <p>
 The installation directory itself and all of it's contents (including all
 nested directories and their own contents) will be deleted.
 <p>
 Even if this method returns <code>false</code>, <em>some</em> of the files
 and directories may have been deleted.
 <p>
 <strong>Warning: this will without discrimination delete the entire 
 contents of the native library installation directory.</strong></div>
<dl><dt><span class="strong">Returns:</span></dt><dd><code>true</code> if all files and directories were deleted, otherwise <code>false</code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><em>(C)2011 Caprica Software Limited</em></div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../../../uk/co/caprica/vlcj/runtime/install/NativeLibraryManagerEventAdapter.html" title="class in uk.co.caprica.vlcj.runtime.install"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?uk/co/caprica/vlcj/runtime/install/NativeLibraryManager.html" target="_top">Frames</a></li>
<li><a href="NativeLibraryManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
